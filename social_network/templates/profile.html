{% extends "base.html" %}
{% block title %}پروفایل {{ user.username }}{% endblock %}
{% block content %}
<img src="{{ url_for('static', filename='profile_pics/' + user.profile_image) }}" alt="Profile Picture" width="150">
<h2>پروفایل {{ user.username }}</h2>
<p><strong>درباره من:</strong> {{ user.bio or "تعیین نشده" }}</p>

<h3 class="mt-4">پست‌ها</h3>
{% if posts %}
  <ul class="list-group">
    {% for post in posts %}
      <li class="list-group-item">
        {{ post.body }}
        <small class="text-muted d-block">{{ post.timestamp.strftime('%Y-%m-%d %H:%M') }}</small>
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>هیچ پستی وجود ندارد.</p>
{% endif %}

{% if current_user.is_authenticated and current_user != user %}
  <div class="mt-3">
    {% if current_user.is_following(user) %}
      <a href="{{ url_for('unfollow', username=user.username) }}" class="btn btn-danger">لغو دنبال کردن</a>
    {% else %}
      <a href="{{ url_for('follow', username=user.username) }}" class="btn btn-primary">دنبال کردن</a>
    {% endif %}
  </div>
  <div class="mt-2">
    <a href="{{ url_for('send_message', username=user.username) }}" class="btn btn-secondary">ارسال پیام خصوصی</a>
  </div>
{% endif %}
{% if post.hashtags %}
    <p>
        {% for tag in post.hashtags.split(',') %}
            <a href="{{ url_for('search', username=tag.strip()) }}">#{{ tag.strip() }}</a>
        {% endfor %}
    </p>
{% endif %}

{% endblock %}
